#!/usr/bin/env bash

set -o errexit
set -o nounset
set -o pipefail
set -o errtrace
(shopt -p inherit_errexit &>/dev/null) && shopt -s inherit_errexit

# Provide sub completions
if [ "${1:-}" = "--complete" ]; then
  if [[ $COMP_CWORD -lt 3 ]]; then
    echo "debug normal disable-plugs --help"
  fi

  exit 0
fi

show_help() {
    cat <<EOF
USAGE: a debug <debug|normal|disable-plugs|--help>
EOF
}

switch() {
    cat <<EOF > "$DOTFILES_DIR/runtime/bash_config.bash"
mode=$1
EOF
    echo "Switch mode: $1"
    echo "Run \"$SUB_NAME mode <mode>\" or modify file $DOTFILES_DIR/runtime/bash_config.bash to change mode"
}

case $1 in
  debug|normal|disable-plugs )
    switch "$1"
    ;;
  * )
    show_help
    ;;
esac
